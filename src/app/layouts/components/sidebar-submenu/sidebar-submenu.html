<div *ngFor="let item of items; let i = index"
     class="space-y-1 transition-all duration-300 ease-out"
     [style.transitionDelay]="(i * 50) + 'ms'"
     [class.opacity-0]="!parentOpen"
     [class.translate-x-[-6px]]="!parentOpen"
     [class.opacity-100]="parentOpen"
     [class.translate-x-0]="parentOpen">

  <a *ngIf="!item.children"
     [routerLink]="item.route"
     routerLinkActive="bg-white/10"
     class="flex items-center gap-2 px-3 py-2 text-sm rounded-lg hover:bg-white/10 transition"
     (click)="navigate.emit()">
    <span class="w-1.5 h-1.5 bg-white/60 rounded-full"></span>
    <span>{{ item.label }}</span>
  </a>

  <ng-container *ngIf="item.children">
    <button class="flex items-center justify-between w-full px-3 py-2 text-sm rounded-lg hover:bg-white/10 transition"
            (click)="toggle(item)">
      <span>{{ item.label }}</span>
      <i class="ri-arrow-right-s-line transition-transform"
         [class.rotate-90]="item.open"></i>
    </button>

    <div class="ml-4 overflow-hidden transition-all duration-300"
         [class.max-h-0]="!item.open"
         [class.max-h-64]="item.open">
      <app-sidebar-submenu
        [items]="item.children ?? []"
        [collapsed]="collapsed"
        [parentOpen]="item.open ?? false"
        (navigate)="navigate.emit()"
      ></app-sidebar-submenu>
    </div>
  </ng-container>
</div>
